<!--
     Rather than copying the starter code all at once and pasting it,
     I'm going to type in parts of it from memory, 
     and some other parts (the style tag) by hand 
     to help think and feel about what each part is there for
-->

<!-- 
    Once the functionality to add a photo has been completed, the course instructor gives an exercise to perform:

    - add the ability to click the favourite button and toggle favourite class on the image, so that the button turns gold

    - add the ability to remove an image by clicking on it.
        I have decided to add an x button on the top right instead of clicking on the image itself.
        This will allow the image to be clicked on for other reasons, 
        such as enlarging the image which is what would be expected in this situation vs deleting it
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project 2 - Image Gallery - Vue 3.4</title>

    <link
      rel="stylesheet"
      href="https://www.unpkg.com/normalize.css/normalize.css"
    />

    <!-- note: adding 'type="text/css" is implied if not written so it is not necessary to add' -->
    <style type="text/css">
      body {
        font-family: monospace;
        padding: 20px;
        font-size: 16px;
      }

      .gallery {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        /* grid-gap: 10px; - this is deprecated*/
        gap: 10px;
      }

      .photo {
        position: relative;
        border: 1px solid #ccc;
      }

      .photo img {
        width: 100%;
        display: block;
      }

      .favourite-button {
        background: none;
        border: none;
        color: #ccc;
        font-size: 24px;
        position: absolute;
        bottom: 5px;
        right: 5px;
        cursor: pointer;
      }

      .favourite-button.active {
        color: gold;
      }

      .no-photos {
        text-align: center;
        color: #999;
      }

      form {
        margin-bottom: 20px;
      }
    </style>
    <script src="https://www.unpkg.com/vue@3.4.0"></script>
  </head>
  <body>
    <div id="App">
      <!-- Adding v-on:submit.prevent without a callback is able to make the submit button not reload the page -->
      <form @submit.prevent="addPhoto">
        <input v-model="photoURL" placeholder="Enter image URL" />
        <button type="submit">Add Photo</button>
      </form>

      <!-- Conditional rendering wiill go here -->
      <p class="no-photos" v-if="photos.length === 0">
        No photos added yet. Add some!
      </p>
      <div class="gallery" v-else>
        <!-- list rendering will go here -->
        <div v-for="photo in photos" :key="photo.id" class="photo">
          <!-- image goes here -->
          <!-- {{photo.url}} -->
          <img :src="photo.url" alt="" />
          <button class="favourite-button">
            <!-- &#9733 generates a star emoji -->
            &#9733
            <!-- using ALT code to directly show emoji in text editor, ALT + 9733 does not generate a star but something else -->
          </button>
        </div>
      </div>
    </div>
    <script>
      const { createApp, ref, compute } = Vue;

      const App = {
        setup() {
          // a ref value for the image text isn't absolutely necessary for this
          let photoURL = ref("");

          const photos = ref([]);

          const addPhoto = () => {
            if (photoURL.value === "") return;

            console.log("Photo added");

            const newPhoto = {
              id: photos.value.length + 1,
              url: photoURL.value,
              isFavourite: false,
            };
            photos.value.push(newPhoto);
          };

          const toggleFavourite = () => {};

          return {
            photoURL,
            photos,
            addPhoto,
            toggleFavourite,
          };
        },
      };

      createApp(App).mount("#App");
    </script>
  </body>
</html>
